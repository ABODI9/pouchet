<!-- Yellow top bar -->
<div class="topbar" aria-label="updates">
  <div class="track">
    <span>Carrying dreams, not rules.</span>
    <span>WhatsApp concierge</span>
    <span>3-day exchanges</span>
  </div>
  <div class="track dup" aria-hidden="true">
    <span>Carrying dreams, not rules.</span>
    <span>WhatsApp concierge</span>
    <span>3-day exchanges</span>
  </div>
</div>

<header class="header">
  <!-- Brand -->
  <a class="brand" routerLink="/" aria-label="POUCHET">
    <img src="logo-pouchet.png" alt="POUCHET" />
  </a>

  <!-- Tools -->
  <div class="tools">
    <button class="btn ghost" (click)="openMiniCart()">
      ðŸ›’ Cart <span class="badge" *ngIf="count$ | async as c">{{ c }}</span>
    </button>

    <!-- Currency -->
    <div class="select">
      <button (click)="toggleCurrencies()">
        {{ code() }} <span class="chev">â–¾</span>
      </button>
      <div class="menu" *ngIf="currOpen()">
        <button (click)="setCurrency('SAR')">SAR</button>
        <button (click)="setCurrency('TRY')">TRY</button>
        <button (click)="setCurrency('EUR')">EUR</button>
      </div>
    </div>

    <!-- Search (visual only) -->
    <div class="search">
      <svg viewBox="0 0 24 24" class="i">
        <path
          d="M21 21l-4.3-4.3m1.8-5.2a7 7 0 11-14 0 7 7 0 0114 0z"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        />
      </svg>
      <input placeholder="Search productsâ€¦" />
    </div>
  </div>

  <!-- Right side: Login / User menu / Admin -->
  <div class="right">
    <ng-container *ngIf="user$ | async as u; else loggedOut">
      <span class="role" [class.admin]="u?.role === 'admin'">{{
        u?.role || "user"
      }}</span>
      <button class="avatar" (click)="toggleMenu()">
        {{ initial(u?.email) }}
      </button>
      <div class="menu" *ngIf="menuOpen()">
        <a routerLink="/profile" (click)="closeMenu()">Profile</a>
        <a *ngIf="u?.role === 'admin'" routerLink="/admin" (click)="closeMenu()"
          >Admin</a
        >
        <button (click)="logout()">Logout</button>
      </div>
    </ng-container>
    <ng-template #loggedOut>
      <a class="btn ghost" routerLink="/login">Sign in</a>
    </ng-template>
  </div>
</header>

<!-- Single global mini-cart -->
<app-mini-cart></app-mini-cart>
