<div class="mc-backdrop" *ngIf="open()" (click)="close()"></div>

<aside class="mc" [class.on]="open()">
  <header class="mc__head">
    <strong>Shopping Cart</strong>
    <button class="x" (click)="close()">✕</button>
  </header>

  <div class="mc__list">
    <ng-container *ngFor="let it of items$ | async">
      <div class="row" *ngIf="qty(it) > 0">
        <img [src]="it.productImage || ''" alt="" />
        <div class="info">
          <div class="name">{{ it.productName }}</div>
          <div class="price">{{ it.unitPrice | price }}</div>
        </div>

        <button class="remove" (click)="remove(it)">✕</button>

        <div class="qty-fab">
          <button class="qbtn" (click)="dec(it)">−</button>
          <span class="qval">{{ qty(it) }}</span>
          <button class="qbtn" (click)="inc(it)">+</button>
        </div>
      </div>
    </ng-container>

    <div class="empty" *ngIf="!(items$ | async)?.length">
      Your cart is empty.
    </div>
  </div>

  <footer class="mc__foot">
    <button class="btn gold" (click)="checkoutWhatsApp()">
      Buy via WhatsApp
    </button>
    <a routerLink="/cart" class="btn ghost" (click)="close()">View all items</a>
  </footer>
</aside>
